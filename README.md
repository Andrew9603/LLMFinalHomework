# ğŸš¦ åŸºäº RAG çš„å¼€æ”¾å¼äº¤é€šæµä»¿çœŸä»£ç ç”Ÿæˆç³»ç»Ÿ

## ğŸŒŸ é¡¹ç›®ç®€ä»‹

åŸºäº RAG çš„å¼€æ”¾å¼äº¤é€šæµä»¿çœŸä»£ç ç”Ÿæˆç³»ç»Ÿ æ˜¯ä¸€æ¬¾èåˆå¤§è¯­è¨€æ¨¡å‹ä¸æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯çš„æ™ºèƒ½å·¥å…·ï¼Œæ—¨åœ¨è§£å†³ä¼ ç»Ÿäº¤é€šä»¿çœŸå·¥å…·æŠ€æœ¯é—¨æ§›é«˜ã€å»ºæ¨¡å‘¨æœŸé•¿çš„ç—›ç‚¹ã€‚é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ï¼Œéä¸“ä¸šç”¨æˆ·å¯å¿«é€Ÿè·å–å¯ç›´æ¥è¿è¡Œçš„ SUMOï¼ˆSimulation of Urban Mobilityï¼‰ä»¿çœŸä»£ç ï¼Œå°†äº¤é€šå»ºæ¨¡å‘¨æœŸä»æ•°å¤©ç¼©çŸ­è‡³å°æ—¶çº§ï¼Œä¸ºäº¤é€šè§„åˆ’ã€ç§‘ç ”å®éªŒã€æ–¹æ¡ˆéªŒè¯ç­‰åœºæ™¯æä¾›é«˜æ•ˆæ”¯æ’‘ã€‚
æ ¸å¿ƒä»·å€¼ï¼š

- ğŸš€ ä½é—¨æ§›æ˜“ç”¨ï¼šè‡ªç„¶è¯­è¨€é©±åŠ¨ï¼Œæ— éœ€ä¸“ä¸šç¼–ç¨‹ä¸ä»¿çœŸçŸ¥è¯†

- ğŸ“š ç²¾å‡†ç”Ÿæˆï¼šä¾æ‰˜ä¸“ä¸šåŒ–äº¤é€šä»¿çœŸçŸ¥è¯†åº“ï¼Œä»£ç å¯æ‰§è¡Œç‡è¾¾ 84%

- ğŸ”Œ å¼€æ”¾æ‰©å±•ï¼šæ”¯æŒå¤šæºæ•°æ®æ¥å…¥ä¸ AI æ¨¡å‹å¯¹æ¥ï¼Œé€‚é…å¤æ‚åœºæ™¯

- ğŸ”’ å®‰å…¨ç¨³å®šï¼šå¤šå±‚å®‰å…¨é˜²æŠ¤ä½“ç³»ï¼Œä¿éšœå¤šç”¨æˆ·å¹¶å‘è®¿é—®

## ğŸ—ï¸ æ•´ä½“æ¶æ„
è‡ªç„¶è¯­è¨€è¾“å…¥ â†’ RAGå¢å¼ºæ¨¡å— â†’ ä»£ç ç”Ÿæˆå¼•æ“ â†’ SUMOä»¿çœŸä»£ç  â†’ ä»¿çœŸéªŒè¯
                  â†‘                â†‘
                  â”‚                â”‚
            äº¤é€šçŸ¥è¯†åº“          å®‰å…¨éƒ¨ç½²å±‚
```bash
traffic-simulation-code-generator/
â”œâ”€â”€ docs/                     # Project documents (API, knowledge base guide)
â”‚
â”œâ”€â”€ service/                  # Core backend modules
â”‚   â”œâ”€â”€ knowledge_base.py     # Knowledge base loader & retriever
â”‚   â”œâ”€â”€ code_generator.py     # RAG code generation engine
â”‚   â””â”€â”€ security.py           # Auth & permission system
â”‚
â”œâ”€â”€ webui/                    # Web UI module
â”‚   â”œâ”€â”€ app.py                # Frontend server entry
â”‚   â””â”€â”€ static/               # Static resources (CSS/JS)
â”‚
â”œâ”€â”€ data/                     # Data directory
â”‚   â”œâ”€â”€ knowledge/            # Knowledge base raw & structured files
â”‚   â””â”€â”€ test_cases/           # Example test cases
â”‚
â”œâ”€â”€ config/                   # Configuration
â”‚   â”œâ”€â”€ model_config.py       # Model settings
â”‚   â””â”€â”€ security_config.py    # Security settings
â”‚
â”œâ”€â”€ .env                      # Environment variables (excluded from Git)
â”œâ”€â”€ requirements.txt          # Dependencies
â””â”€â”€ README.md                 # Project documentation

```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

* [cite_start]**åŸºåº§æ¨¡å‹ (LLM):** CodeGeeX4-9B (ä»£ç ç”Ÿæˆ) [cite: 37]
* [cite_start]**åµŒå…¥æ¨¡å‹ (Embedding):** BGE-M3 (RAG æ£€ç´¢) [cite: 40]
* [cite_start]**æ¨¡å‹æœåŠ¡æ¡†æ¶:** Ollama [cite: 5]
* [cite_start]**å‰ç«¯ç•Œé¢:** Open-WebUI [cite: 29]
* [cite_start]**å†…ç½‘ç©¿é€ä¸å®‰å…¨:** Frp + Token è®¤è¯ + SSH å¯†é’¥ [cite: 66, 79, 109, 151]

## ğŸš€ éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—å‡è®¾æ‚¨å·²æ‹¥æœ‰ä¸€ä¸ªå¯ä¾›éƒ¨ç½²çš„å†…ç½‘ç¯å¢ƒï¼ˆå¦‚é˜¿é‡Œäº‘ DSW å®ä¾‹ï¼‰å’Œä¸€ä¸ªå…¬ç½‘æœåŠ¡å™¨ï¼ˆå¦‚é˜¿é‡Œäº‘ ECS æˆ– VPSï¼‰ï¼Œå¹¶ä½¿ç”¨ `root` æˆ–å…·æœ‰ `sudo` æƒé™çš„ç”¨æˆ·è¿›è¡Œæ“ä½œã€‚

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¡†æ¶éƒ¨ç½²ï¼ˆåœ¨å†…ç½‘ DSW ç»ˆç«¯æ‰§è¡Œï¼‰

#### 1. Ollama æ¡†æ¶éƒ¨ç½²

Ollama ç”¨äºè½»é‡åŒ–éƒ¨ç½² CodeGeeX4 å’Œ BGE-M3 æ¨¡å‹ã€‚

```bash
# 1. å®‰è£… Ollama
[cite_start]curl -fsSL [https://ollama.com/install.sh](https://ollama.com/install.sh) | sh [cite: 5]

# 2. æ›´æ–° apt å¹¶å®‰è£… systemd/systemctl (ç”¨äºæœåŠ¡ç®¡ç†)
[cite_start]sudo apt-get update [cite: 7]
[cite_start]sudo apt-get install systemd -y [cite: 9]
[cite_start]sudo apt-get install systemctl -y [cite: 10]

# 3. è®¾ç½®å¹¶å¯åŠ¨ Ollama æœåŠ¡
[cite_start]sudo systemctl enable ollama [cite: 12]
[cite_start]sudo systemctl start ollama [cite: 14]

[cite_start]sudo systemctl status ollama # æ£€æŸ¥çŠ¶æ€ [cite: 16]


```

traffic-simulation-code-generator/
â”œâ”€â”€ docs/                # é¡¹ç›®æ–‡æ¡£ï¼ˆå«APIè¯´æ˜ã€çŸ¥è¯†åº“æ„å»ºæŒ‡å—ï¼‰
â”œâ”€â”€ service/             # æ ¸å¿ƒæœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ knowledge_base.py # çŸ¥è¯†åº“ç®¡ç†ï¼ˆæ•°æ®åŠ è½½ã€æ£€ç´¢æ¥å£ï¼‰
â”‚   â”œâ”€â”€ code_generator.py # ä»£ç ç”Ÿæˆå¼•æ“ï¼ˆRAGå¢å¼ºã€æ¨¡å‹è°ƒç”¨ï¼‰
â”‚   â””â”€â”€ security.py      # å®‰å…¨æœºåˆ¶ï¼ˆæƒé™æ§åˆ¶ã€å¯†é’¥ç®¡ç†ï¼‰
â”œâ”€â”€ webui/               # Webç•Œé¢æ¨¡å—
â”‚   â”œâ”€â”€ app.py           # å‰ç«¯æœåŠ¡å…¥å£
â”‚   â””â”€â”€ static/          # é™æ€èµ„æºï¼ˆCSS/JSï¼‰
â”œâ”€â”€ data/                # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ knowledge/       # çŸ¥è¯†åº“åŸå§‹æ•°æ®ä¸ç»“æ„åŒ–æ–‡ä»¶
â”‚   â””â”€â”€ test_cases/      # æµ‹è¯•ç”¨ä¾‹ï¼ˆè·¯ç½‘æè¿°ã€ä¿¡å·æ§åˆ¶ç­‰ï¼‰
â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ model_config.py  # æ¨¡å‹å‚æ•°é…ç½®
â”‚   â””â”€â”€ security_config.py # å®‰å…¨é…ç½®
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡é…ç½®ï¼ˆä¸æäº¤Gitï¼‰
â”œâ”€â”€ requirements.txt     # ä¾èµ–æ¸…å•
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜æ–‡æ¡£



## æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º ğŸ¬
ç¤ºä¾‹ ï¼šåå­—äº¤å‰å£ä»¿çœŸä»£ç ç”Ÿæˆ

è¾“å…¥ï¼š"ç”Ÿæˆåå­—äº¤å‰å£è·¯ç½‘ï¼Œä¸œè¥¿å‘ 3 è½¦é“ï¼Œå—åŒ—å‘ 2 è½¦é“ï¼Œä¿¡å·å‘¨æœŸ 60 ç§’ï¼Œäº¤é€šæµé‡ 800pcu/h"

è¾“å‡ºï¼š

- è·¯ç½‘æ–‡ä»¶ï¼ˆnet.xmlï¼‰ï¼šå®šä¹‰é“è·¯æ‹“æ‰‘ã€è½¦é“å±æ€§ã€äº¤å‰å£è¿æ¥

- è·¯çº¿æ–‡ä»¶ï¼ˆroutes.xmlï¼‰ï¼šå®šä¹‰è½¦è¾†ç±»å‹ã€è¡Œé©¶è·¯çº¿ã€å‘è½¦é¢‘ç‡

- ä¿¡å·æ§åˆ¶æ–‡ä»¶ï¼ˆtls.xmlï¼‰ï¼šå®šä¹‰ä¿¡å·ç›¸ä½ã€ç»¿ç¯æ—¶é•¿ã€å‘¨æœŸå‚æ•°



## å¼€å‘ä¸è´¡çŒ® ğŸ¤

###å¼€å‘æŒ‡å—

1. è¯·åŸºäº dev åˆ†æ”¯åˆ›å»º feature åˆ†æ”¯è¿›è¡Œå¼€å‘

2. ä»£ç æäº¤éœ€éµå¾ªConventional Commitsè§„èŒƒ

3. æ–°å¢åŠŸèƒ½éœ€é…å¥—ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼ˆæ”¾ç½®äº tests/ ç›®å½•ï¼‰

4. æäº¤ PR å‰è¯·è¿è¡Œ pytest ç¡®ä¿æµ‹è¯•é€šè¿‡

###çŸ¥è¯†åº“æ‰©å±•

å¦‚éœ€æ‰©å±•çŸ¥è¯†åº“è¦†ç›–èŒƒå›´ï¼Œå¯å‚è€ƒ docs/knowledge_base_guide.mdï¼ŒæŒ‰ç…§ä»¥ä¸‹æµç¨‹æ“ä½œï¼š

1. é‡‡é›†äº¤é€šä»¿çœŸé¢†åŸŸç›¸å…³çŸ¥è¯†ï¼ˆæ–‡çŒ®ã€æŠ€æœ¯æ–‡æ¡£ã€SUMO å®˜æ–¹è§„èŒƒï¼‰

2. æŒ‰ç…§æŒ‡å®šæ ¼å¼ï¼ˆJSONLï¼‰è¿›è¡Œç»“æ„åŒ–å¤„ç†

3. è¿è¡Œ python tools/knowledge_process.py å¯¼å…¥ Chroma æ•°æ®åº“

4. æ‰§è¡Œ python tests/test_retrieval.py éªŒè¯æ£€ç´¢ç²¾åº¦

###è´¡çŒ®æµç¨‹

1. Fork æœ¬ä»“åº“

2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼šgit checkout -b feature/your-feature

3. æäº¤ä¿®æ”¹ï¼šgit commit -m "feat: add your feature"

4. æ¨é€åˆ†æ”¯ï¼šgit push origin feature/your-feature

5. æäº¤ Pull Request

## æœªæ¥è§„åˆ’ ğŸ›£ï¸

[] æ‰©å±•çŸ¥è¯†åº“è¦†ç›–èŒƒå›´ï¼ˆæ–°å¢æ™ºèƒ½äº¤é€šã€è½¦è·¯ååŒç­‰åœºæ™¯çŸ¥è¯†ï¼‰

[] ä¼˜åŒ–å¤æ‚åœºæ™¯ä»£ç ç”Ÿæˆé€»è¾‘ï¼ˆæ”¯æŒå¤šäº¤å‰å£ååŒæ§åˆ¶ã€åŠ¨æ€äº¤é€šæµï¼‰

[] å¼ºåŒ–ä»¿çœŸç»“æœå¯è§†åŒ–ï¼ˆæ–°å¢æ•°æ®ç»Ÿè®¡å›¾è¡¨ã€æ‹¥å µçƒ­ç‚¹åˆ†æï¼‰

[] æ”¯æŒå¤šè¯­è¨€ä»£ç ç”Ÿæˆï¼ˆé€‚é… VISSIMã€TransModeler ç­‰å…¶ä»–ä»¿çœŸå·¥å…·ï¼‰

[] æä¾› Docker å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œç®€åŒ–ç¯å¢ƒé…ç½®

##è®¸å¯è¯ ğŸ“œ

æœ¬é¡¹ç›®åŸºäº [MIT è®¸å¯è¯](LICENSE) å¼€æºï¼Œå…è®¸å•†ä¸šä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘ï¼Œéœ€ä¿ç•™åŸä½œè€…ç‰ˆæƒå£°æ˜ã€‚

è”ç³»æ–¹å¼ ğŸ“§

- é¡¹ç›®ç»´æŠ¤è€…ï¼šå¼ å‹‡å¼º ã€å®‹é‡‘æºã€é—«æœ¬æ—­

- æŠ€æœ¯å’¨è¯¢ï¼š3390847466@qq.com





